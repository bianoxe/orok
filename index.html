<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>2D –¢–∞–Ω—á–∏–∫–∏ - –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä</title>
    <link rel="stylesheet" href="style.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas" width="800" height="600"></canvas>
        
        <div id="map-timer-ui">
            –°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã: <span id="map-timer">4:00</span>
        </div>
        
        <div class="player-list" id="player-list"></div>
        
        <button id="settings-button">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        
        <!-- –ü–∞–Ω–µ–ª—å –æ—Ä—É–∂–∏–π -->
        <div id="weapon-panel">
            <div class="weapon-slot active" data-weapon="pistol">
                <div class="weapon-key">1</div>
                <div class="weapon-name">–ü–ò–°–¢–û–õ–ï–¢</div>
                <div class="ammo-count">13/13</div>
                <div class="reload-indicator"></div>
            </div>
            <div class="weapon-slot" data-weapon="ak47">
                <div class="weapon-key">2</div>
                <div class="weapon-name">–ê–ö-47</div>
                <div class="ammo-count">31/31</div>
                <div class="reload-indicator"></div>
            </div>
            <div class="weapon-slot" data-weapon="sniper">
                <div class="weapon-key">3</div>
                <div class="weapon-name">–°–ù–ê–ô–ü–ï–†–ö–ê</div>
                <div class="ammo-count">5/5</div>
                <div class="reload-indicator"></div>
            </div>
            <div class="weapon-slot" data-weapon="shotgun">
                <div class="weapon-key">4</div>
                <div class="weapon-name">–î–†–û–ë–û–í–ò–ö</div>
                <div class="ammo-count">4/4</div>
                <div class="reload-indicator"></div>
            </div>
            <div class="weapon-slot" data-weapon="grenade">
                <div class="weapon-key">5</div>
                <div class="weapon-name">–ì–†–ê–ù–ê–¢–ê</div>
                <div class="ammo-count">2/2</div>
                <div class="reload-indicator"></div>
            </div>
        </div>
        <div id="weapon-info"></div>
        
        <div id="mobile-controls">
            <div class="joystick-container" id="move-joystick">
                <div class="joystick-base"></div>
                <div class="joystick-handle"></div>
            </div>
            <div class="action-buttons">
                <div class="action-button" id="shoot-button">–°–¢–†–ï–õ–Ø–¢–¨</div>
            </div>
        </div>

        <div id="mobile-buttons-controls">
            <div class="movement-buttons">
                <div class="movement-button" id="up-button">‚Üë</div>
                <div class="movement-button" id="left-button">‚Üê</div>
                <div class="movement-button" id="down-button">‚Üì</div>
                <div class="movement-button" id="right-button">‚Üí</div>
            </div>
            <div class="action-buttons">
                <div class="action-button" id="shoot-button-buttons">–°–¢–†–ï–õ–Ø–¢–¨</div>
            </div>
        </div>

        <div id="pc-mobile-joystick">
            <div class="pc-mobile-joystick-container" id="pc-mobile-joystick-container">
                <div class="pc-mobile-joystick-base"></div>
                <div class="pc-mobile-joystick-handle"></div>
            </div>
            <div style="color: white; font-size: 12px;">–î–∂–æ–π—Å—Ç–∏–∫ (–∑–∞–∂–º–∏—Ç–µ –õ–ö–ú) + –ü—Ä–æ–±–µ–ª - —Å—Ç—Ä–µ–ª—è—Ç—å</div>
        </div>
        
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu">
            <div class="menu-title">2D –¢–ê–ù–ß–ò–ö–ò</div>
            <div class="menu-buttons">
                <button class="menu-button" id="play-button">üéÆ –ò–ì–†–ê–¢–¨</button>
                <button class="menu-button" id="controls-button">‚öôÔ∏è –£–ü–†–ê–í–õ–ï–ù–ò–ï</button>
                <button class="menu-button" id="wardrobe-button">üé® –ì–ê–†–î–ï–†–û–ë</button>
            </div>
            <div style="color: #888; font-size: 14px; text-align: center; max-width: 400px;">
                –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏<br>
                –°—Ä–∞–∂–∞–π—Å—è —Å –∏–≥—Ä–æ–∫–∞–º–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É!
            </div>
        </div>
        
        <!-- –ú–µ–Ω—é –∏–≥—Ä—ã -->
        <div id="game-menu">
            <div class="menu-title">–í–´–ë–ï–†–ò–¢–ï –†–ï–ñ–ò–ú</div>
            <div class="menu-buttons">
                <button class="menu-button" id="quick-play-button">‚ö° –ë–´–°–¢–†–û –ò–ì–†–ê–¢–¨</button>
                <button class="menu-button" id="lobby-list-button" disabled>üìã –°–ü–ò–°–û–ö –õ–û–ë–ë–ò (–°–ö–û–†–û)</button>
                <button class="menu-button" id="create-lobby-button" disabled>‚ûï –°–û–ó–î–ê–¢–¨ –õ–û–ë–ë–ò (–°–ö–û–†–û)</button>
                <button class="menu-button back-button" id="back-to-main-menu">‚Üê –ù–ê–ó–ê–î</button>
            </div>
            <div style="color: #888; font-size: 14px; text-align: center; max-width: 400px; margin-top: 20px;">
                –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±—ã—á–Ω–æ–π –∫–∞—Ä—Ç–µ<br>
                –°–ø–∏—Å–æ–∫ –ª–æ–±–±–∏: –≤—ã–±–æ—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç<br>
                –°–æ–∑–¥–∞—Ç—å –ª–æ–±–±–∏: —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –∏–≥—Ä—É —Å –≤—ã–±–æ—Ä–æ–º –∫–∞—Ä—Ç—ã
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
        <div id="login-screen">
            <h2>2D –¢–∞–Ω—á–∏–∫–∏ - –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä</h2>
            <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" maxlength="15">
            <select id="device-type">
                <option value="pc">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: –ü–ö</option>
                <option value="mobile">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: –¢–µ–ª–µ—Ñ–æ–Ω</option>
            </select>
            <div style="margin: 10px;">
                <button id="back-to-menu" class="back-button">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <button id="join-game">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</button>
        </div>

        <!-- –û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settings-screen">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
            
            <div class="settings-section">
                <h3>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</h3>
                <div class="settings-option">
                    <label>–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</label>
                    <select id="settings-device-type">
                        <option value="pc">–ü–ö</option>
                        <option value="mobile">–¢–µ–ª–µ—Ñ–æ–Ω</option>
                    </select>
                </div>
            </div>

            <div class="settings-section" id="pc-controls-section">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ü–ö</h3>
                <div class="settings-option">
                    <label>–†–∞—Å–∫–ª–∞–¥–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</label>
                    <select id="pc-control-layout">
                        <option value="keyboard">–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (WASD/–°—Ç—Ä–µ–ª–∫–∏)</option>
                        <option value="joystick">–î–∂–æ–π—Å—Ç–∏–∫ (–∫–∞–∫ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ)</option>
                    </select>
                </div>
                <div class="settings-option">
                    <label>–¢–∏–ø —Å—Ç—Ä–µ–ª—å–±—ã:</label>
                    <select id="pc-shoot-type">
                        <option value="mouse" selected>–ü—Ä–∏—Ü–µ–ª –º—ã—à–∫–æ–π (–¥—É–ª–æ —Å–ª–µ–¥–∏—Ç –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º)</option>
                        <option value="keyboard">–û–±—ã—á–Ω—ã–π (—Å—Ç—Ä–µ–ª—å–±–∞ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è)</option>
                    </select>
                </div>
            </div>

            <div class="settings-section" id="mobile-controls-section">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</h3>
                <div class="settings-option">
                    <label>–†–∞—Å–∫–ª–∞–¥–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</label>
                    <select id="mobile-control-layout">
                        <option value="joystick">–î–∂–æ–π—Å—Ç–∏–∫ + –∫–Ω–æ–ø–∫–∏</option>
                        <option value="buttons">–ö–Ω–æ–ø–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ</option>
                    </select>
                </div>
                <div class="settings-option">
                    <label>–¢–∏–ø —Å—Ç—Ä–µ–ª—å–±—ã:</label>
                    <select id="mobile-shoot-type">
                        <option value="touch">–ù–∞–≤–æ–¥–∫–∞ (—Å—Ç—Ä–µ–ª—å–±–∞ –≤ —Ç–æ—á–∫—É –∫–∞—Å–∞–Ω–∏—è)</option>
                        <option value="button">–û–±—ã—á–Ω—ã–π (—Å—Ç—Ä–µ–ª—å–±–∞ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è)</option>
                    </select>
                </div>
            </div>

            <div style="margin-top: 20px;">
                <button id="close-settings" class="menu-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å</button>
                <button id="back-to-menu-from-settings" class="back-button" style="margin-top: 10px;">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ -->
        <div id="wardrobe-screen">
            <div class="wardrobe-container">
                <h2>üé® –ì–∞—Ä–¥–µ—Ä–æ–± —Ç–∞–Ω–∫–∞</h2>
                <div class="current-selection">
                    –¢–µ–∫—É—â–∏–π —Ü–≤–µ—Ç: <span class="color-name" id="current-color-name">–ó–µ–ª—ë–Ω—ã–π</span>
                </div>
                
                <div class="tank-preview">
                    <canvas id="tank-preview-canvas" width="200" height="200" class="tank-preview-canvas"></canvas>
                </div>
                
                <div style="margin: 10px 0; text-align: center;">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∫–æ—Ä–ø—É—Å–∞ —Ç–∞–Ω–∫–∞:
                </div>
                
                <div class="color-options" id="color-options">
                    <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                
                <div style="margin-top: 20px;">
                    <button id="save-wardrobe" class="menu-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–≤–µ—Ç</button>
                    <button id="back-to-menu-from-wardrobe" class="back-button" style="margin-top: 10px;">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
                </div>
            </div>
        </div>

        <div id="loading" style="display: none;">
            –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã...
        </div>
    </div>

    <!-- –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –°–ö–†–ò–ü–¢–û–í -->
    <script src="js/constants.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/player.js"></script>
    <script src="js/weapons.js"></script>
    <script src="js/input.js"></script>
    <script src="js/game.js"></script>
</body>
</html>